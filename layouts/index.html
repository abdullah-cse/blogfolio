<!-- Home Page Template -->
{{ define "main" }}
<!-- Hero Section -->
<section class="hero">
  <div class="container">
    <div class="hero-content">
      {{ with .Site.Params.avatar }}
      <img src="{{ . }}" alt="{{ $.Site.Params.author }}" class="avatar avatar-squircle">
      {{ end }}
      <h1>{{ .Site.Params.hero_title | default .Site.Title }}</h1>
      <p class="hero-tagline">{{ .Site.Params.hero_subtitle | default .Site.Params.description }}</p>
      {{ with .Site.Params.hero_cta }}
      <div class="hero-cta">
        <a href="{{ .primary_url }}" class="btn btn-primary">{{ .primary_text }}</a>
        {{ with .secondary_url }}
        <a href="{{ . }}" class="btn btn-secondary">{{ $.Site.Params.hero_cta.secondary_text }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>

<!-- Skills Section -->
{{ with .Site.Params.skills }}
<section class="skills-section">
  <div class="container">
    <h2>Skills & Expertise</h2>
    <div class="skills-grid">
      {{ range . }}
      <div class="skill-card">
        {{ with .icon }}
        <div class="skill-icon">{{ . }}</div>
        {{ end }}
        <h3>{{ .name }}</h3>
        <p>{{ .description }}</p>
        {{ with .items }}
        <ul class="skill-items">
          {{ range . }}
          <li>{{ . }}</li>
          {{ end }}
        </ul>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Tech Stack Section -->
{{ with .Site.Params.tech_stack }}
<section class="tech-stack-section">
  <div class="container">
    <h2>Tech Stack</h2>
    <div class="tech-categories">
      {{ range . }}
      <div class="tech-category">
        <h3>{{ .category }}</h3>
        <div class="tech-items">
          {{ range .technologies }}
          <span class="tech-badge">{{ . }}</span>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Pinned Projects Section -->
{{ $all_projects := where .Site.RegularPages "Section" "projects" }}
{{ $pinned_projects := where $all_projects "Params.pinProject" true }}
{{ if gt (len $pinned_projects) 0 }}
<section class="projects-section">
  <div class="container">
    <div class="projects-section-header">
      <h2>Featured Projects</h2>
      <p>Check out some of my highlighted work</p>
    </div>

    {{ partial "projects.html" (dict "projects" $pinned_projects "show_filters" true) }}

    <!-- Show More Button -->
    {{ if gt (len $all_projects) (len $pinned_projects) }}
    <div class="show-more-container">
      <a href="/projects/" class="btn">
        View All Projects
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7" />
        </svg>
      </a>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}

<!-- Recent Blog Posts -->
{{ $posts := where .Site.RegularPages "Section" "blog" }}
{{ if gt (len $posts) 0 }}
<section class="recent-posts">
  <div class="container">
    <h2>Recent Posts</h2>
    <div class="posts-grid">
      {{ range first 3 $posts }}
      {{ partial "post-card.html" . }}
      {{ end }}
    </div>
    <div class="view-all">
      <a href="/blog/" class="btn">View All Posts</a>
    </div>
  </div>
</section>
{{ end }}
{{ end }}