<!-- Projects Page Template -->
{{ define "main" }}
<div class="projects-page">
  <div class="container">
    <!-- Page Header -->
    <header class="page-header">
      <h1>{{ .Title }}</h1>
      {{ with .Params.description }}
      <p class="page-description">{{ . }}</p>
      {{ end }}
    </header>

    {{ $all_projects := where .Site.RegularPages "Section" "projects" }}
    {{ $pinned_projects := where $all_projects "Params.pinProject" true }}
    {{ $other_projects := where $all_projects "Params.pinProject" "!=" true }}
    
    {{ if gt (len $all_projects) 0 }}
      <!-- Pinned Projects Section -->
      {{ if gt (len $pinned_projects) 0 }}
      <section class="pinned-projects-section">
        <div class="projects-section-header">
          <h2>Pinned Projects</h2>
          <p>My highlighted work</p>
        </div>
        
        {{ partial "projects.html" (dict "projects" $pinned_projects "show_filters" false) }}
      </section>
      {{ end }}
      
      <!-- All Projects Section with Filters -->
      <section class="all-projects-section">
        {{ if gt (len $pinned_projects) 0 }}
        <div class="projects-section-header">
          <h2>All Projects</h2>
          <p>Explore my complete portfolio</p>
        </div>
        {{ end }}
        
        {{ partial "projects.html" (dict "projects" $all_projects "show_filters" true) }}
      </section>
    {{ else }}
      <div class="no-projects">
        <p>No projects found. Check back soon!</p>
      </div>
    {{ end }}
  </div>
</div>
{{ end }}